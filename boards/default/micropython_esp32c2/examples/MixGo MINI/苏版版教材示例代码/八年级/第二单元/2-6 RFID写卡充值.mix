<xml version="Mixly 3.0 rc0" board="Python ESP32-C2@MixGo MINI" shown="block"><variables><variable id="B@f_{Y?Z,7y79wFT^sI0">金额</variable></variables><block type="controls_whileUntil" id="m(HjgN)S9akCdj)fuuCq" x="-3909" y="-1396"><field name="MODE">WHILE</field><value name="BOOL"><shadow type="logic_boolean" id="R*Fpy$l:O{pL^5Hi+hID"><field name="BOOL">TRUE</field></shadow></value><statement name="DO"><block type="controls_if" id="M~u+W}76GNSAx{rZsp~`"><value name="IF0"><block type="sensor_mixgo_button_was_pressed" id="{OcsiG3Z(f_^wxSzsEAN"><value name="btn"><shadow type="pins_button" id="YCmAd9X+_J}/6Qm?.CLh"><field name="PIN">B2key</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="1Vk~*gXSKNC*g[x]3Qvk"><field name="VAR">卡号</field><value name="VALUE"><block type="mini_g2_rfid_readid" id="{ORTm8_l_Ezu|++b0CBL"></block></value><next><block type="controls_if" id=".qv*k/D~VdUT/qjCE?J;"><value name="IF0"><block type="logic_compare" id="mf1.BCq^;bE=|Z4LkCCA"><field name="OP">NEQ</field><value name="A"><block type="number_to_text" id="z1aVfJz/#hDQbiVgSZZM"><value name="VAR"><shadow type="variables_get" id="VZY@g!3U#s{eTBso+$GI"><field name="VAR">x</field></shadow><block type="variables_get" id="jhN4|4Rr{{t(dVc)I{~8"><field name="VAR">卡号</field></block></value></block></value><value name="B"><block type="text" id="-=wo)5q4RfwT][;hx)|~"><field name="TEXT">None</field></block></value></block></value><statement name="DO0"><block type="procedures_callnoreturn" id="d!Rub-H0@B|$G^xV(Cob"><mutation name="电子钱包初始化"><arg name="金额"></arg></mutation><value name="ARG0"><block type="math_number" id="Gy,L4C4[QM|4),2{6oSn"><field name="NUM">20</field></block></value></block></statement></block></next></block></statement><next><block type="controls_if" id="79n9ltVi0}YP}W]XHY+u"><value name="IF0"><block type="sensor_mixgo_button_was_pressed" id="uOJXUF_(WF]F`SJXVkM~"><value name="btn"><shadow type="pins_button" id="kO3.d/S4XMJgOoV78wlg"><field name="PIN">B1key</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="2n9G/?l$~+q[Au{1:1Ez"><field name="VAR">卡号</field><value name="VALUE"><block type="mini_g2_rfid_readid" id="l.#zy8J3Y?1dtyjunS~d"></block></value><next><block type="controls_if" id="7xyC?7/^o+E|oepKeuwT"><value name="IF0"><block type="logic_compare" id="Lvu!fu1X,~C.bfFL+?:V"><field name="OP">NEQ</field><value name="A"><block type="number_to_text" id="/B8h+f.3c}uToZ:|n$GK"><value name="VAR"><shadow type="variables_get" id="VZY@g!3U#s{eTBso+$GI"><field name="VAR">x</field></shadow><block type="variables_get" id="#WplB$di0^gtZ24B8ge|"><field name="VAR">卡号</field></block></value></block></value><value name="B"><block type="text" id="odT1@(wBLa5nR~z=ADX|"><field name="TEXT">None</field></block></value></block></value><statement name="DO0"><block type="procedures_callnoreturn" id="itai2E?JMhzhR+#n/_0m"><mutation name="电子钱包充值"><arg name="金额"></arg></mutation><value name="ARG0"><block type="math_number" id="Dbaxn+z;1ioFVV[*=~Vh"><field name="NUM">50</field></block></value></block></statement></block></next></block></statement></block></next></block></statement></block><block type="procedures_defnoreturn" id="`,.UmDc*$uklj#_#bXAl" x="-3226" y="-1414"><mutation><arg name="金额" varid="B@f_{Y?Z,7y79wFT^sI0"></arg></mutation><field name="NAME">电子钱包充值</field><statement name="STACK"><block type="variables_set" id="cDQqYiWi0yTp99ViBcHi"><field name="VAR">原值</field><value name="VALUE"><block type="text_to_number" id="sER,HNCe_=3@0ze.t74`"><field name="TOWHAT">int</field><value name="VAR"><shadow type="variables_get" id="Ig0Vd=T;v62#Eh~:ife="><field name="VAR">x</field></shadow><block type="tuple_getIndex" id="$CE~0l5-H};z$nkHe0#="><value name="TUP"><shadow type="variables_get" id="}Xuy+Iu}SX*m6|bEAlps"><field name="VAR">mytup</field></shadow><block type="tuple_totuple" id="j^i}U]W,_@!He7SxQr#z"><value name="VAR"><shadow type="variables_get" id="j/kXO,q!u[uwGF036WTA"><field name="VAR">x</field></shadow><block type="mini_g2_rfid_readcontent" id="}CHuO?iQjQ~P;4r.NBhN"><value name="SECTOR"><shadow type="math_number" id="L]EGGCO~pndRN[Y$ot4Z"><field name="NUM">0</field></shadow></value></block></value></block></value><value name="AT"><shadow type="math_number" id="=5g65`fSsQd!=imSrpqD"><field name="NUM">1</field></shadow></value></block></value></block></value><next><block type="controls_if" id="vChIilC@rZU#Ci+c2hy]"><mutation else="1"></mutation><value name="IF0"><block type="mini_g2_rfid_write_outcome" id="oC+94=Nl?`$/mUsIa.N1"><value name="SECTOR"><shadow type="math_number" id="Jy1,VV2fUXaJJ2sw}w.r"><field name="NUM">0</field></shadow></value><value name="CONTENT"><shadow type="text" id="?NE[Pve5E?8L)keXbf^l"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="kCOH#Bp{=}.z3N_.Tsqx"><value name="VAR"><shadow type="variables_get" id="NpOPV^0N.1fY#r2*f6Px"><field name="VAR">x</field></shadow><block type="math_arithmetic" id="Hq_{Sij33Oks^JsRl?Sy"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="{rwQhie3l6Yw`?S=0mOC"><field name="NUM">1</field></shadow><block type="variables_get" id="iq#NL;*UfmUBk(EVI#eR"><field name="VAR">原值</field></block></value><value name="B"><shadow type="math_number" id="@MDao,rg$NL+}`2;#9rY"><field name="NUM">1</field></shadow><block type="variables_get" id="|f}q|K;Bt|jqx-))AG$]"><field name="VAR">金额</field></block></value></block></value></block></value></block></value><statement name="DO0"><block type="display_show_image_or_string_delay" id="PrMX#pJ5H;7SQ_]c7ShG"><field name="center">True</field><value name="data"><shadow type="text" id="uwM]#4c~k2+3D5_3b,bs"><field name="TEXT">Mixly</field></shadow><block type="math_arithmetic" id="UlgbaPobOz8g5k-5S:y#"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="{rwQhie3l6Yw`?S=0mOC"><field name="NUM">1</field></shadow><block type="variables_get" id="$fg49,jWq+@zjYwC5AzA"><field name="VAR">原值</field></block></value><value name="B"><shadow type="math_number" id="@MDao,rg$NL+}`2;#9rY"><field name="NUM">1</field></shadow><block type="variables_get" id="T`J.5ykj4JpO81=ha(qr"><field name="VAR">金额</field></block></value></block></value><value name="space"><shadow type="math_number" id="w8VDK7$5h(bpz.+}p]:k"><field name="NUM">0</field></shadow></value><next><block type="esp32_onboard_music_pitch_with_time" id="y]ai2XWut4IS{aFT1/Qn"><value name="pitch"><shadow type="pins_tone_notes" id="lT!TG+v1h.]jIZJ]Cx[D"><field name="PIN">659</field></shadow></value><value name="time"><shadow type="math_number" id="FRJ2QN1C,tj(JE=Ki4x8"><field name="NUM">100</field></shadow></value><next><block type="system_print" id="FPY6Iu1s9rh@{9GJT^L["><value name="VAR"><shadow type="text" id="hq{x(fHj4gO;nDIjg:BJ"><field name="TEXT">Mixly</field></shadow><block type="text_join" id="mGnBe5-lYg4d+fk3.a=^"><value name="A"><shadow type="text" id="jNh:;OEQJ*R;-Oa+o$uc"><field name="TEXT">已充值;</field></shadow></value><value name="B"><shadow type="text" id="p-CL.BG]S}QRL{Fh#t_r"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="[#ZYmTlyTMi?adLA~:9F"><value name="VAR"><shadow type="variables_get" id="NpOPV^0N.1fY#r2*f6Px"><field name="VAR">x</field></shadow><block type="variables_get" id=".I$q|B?T6;,EB8rISSr]"><field name="VAR">金额</field></block></value></block></value></block></value><next><block type="system_print" id="zZl5KHeu}OXl/u2737Z7"><value name="VAR"><shadow type="text" id="hq{x(fHj4gO;nDIjg:BJ"><field name="TEXT">Mixly</field></shadow><block type="text_join" id="/b]RS4[~IuM4lnGLSVCy"><value name="A"><shadow type="text" id="91=DUp39Pvs/(-ixX-h)"><field name="TEXT">当前余额：</field></shadow></value><value name="B"><shadow type="text" id="p-CL.BG]S}QRL{Fh#t_r"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="`plT^|ex-(rI#jt/+3TZ"><value name="VAR"><shadow type="variables_get" id="NpOPV^0N.1fY#r2*f6Px"><field name="VAR">x</field></shadow><block type="math_arithmetic" id="sDL.#RkO3gP[D`QoW=3?"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="{rwQhie3l6Yw`?S=0mOC"><field name="NUM">1</field></shadow><block type="variables_get" id="outUJ2ZuE8N#{_uL~D0h"><field name="VAR">原值</field></block></value><value name="B"><shadow type="math_number" id="@MDao,rg$NL+}`2;#9rY"><field name="NUM">1</field></shadow><block type="variables_get" id=")HueC{xb[4hVx/]e5[IE"><field name="VAR">金额</field></block></value></block></value></block></value></block></value></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="display_show_image" id=".7Uz45G!5oOCWwyzXd{H"><value name="data"><shadow type="pins_builtinimg" id="DY9ps3e=I,^K`+MKn~fY"><field name="PIN">onboard_matrix.NO</field></shadow></value><next><block type="esp32_onboard_music_pitch_with_time" id="oW##yH`;TZ3bv-+h6CC("><value name="pitch"><shadow type="pins_tone_notes" id="di@L}#dq+Tbm|MytBd5-"><field name="PIN">131</field></shadow></value><value name="time"><shadow type="math_number" id="u5+0@9#N?4@RSnhLim8Q"><field name="NUM">100</field></shadow></value></block></next></block></statement></block></next></block></statement></block><block type="procedures_defnoreturn" id="wKge!C2Ob5?gKb!hoA{e" x="-3224" y="-966"><mutation><arg name="金额" varid="B@f_{Y?Z,7y79wFT^sI0"></arg></mutation><field name="NAME">电子钱包初始化</field><statement name="STACK"><block type="controls_if" id="RKzi[lIBN!NP`h^x5:XM"><mutation else="1"></mutation><value name="IF0"><block type="mini_g2_rfid_write_outcome" id="5C/{j;(~|9;$:HTD~TY5"><value name="SECTOR"><shadow type="math_number" id="DyHjv{wNDr@9A~#+rQ7a"><field name="NUM">0</field></shadow></value><value name="CONTENT"><shadow type="text" id="?NE[Pve5E?8L)keXbf^l"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="O=,iGTZ+VlgB3F1Q.NNx"><value name="VAR"><shadow type="variables_get" id="cqZW=5zn^upV/|Sn7G+a"><field name="VAR">x</field></shadow><block type="variables_get" id="T0rW4y|3^+pi$M~k13Q:"><field name="VAR">金额</field></block></value></block></value></block></value><statement name="DO0"><block type="display_show_image_or_string_delay" id="{F_.*wI4eyArPD6[9}pC"><field name="center">True</field><value name="data"><shadow type="text" id="uwM]#4c~k2+3D5_3b,bs"><field name="TEXT">Mixly</field></shadow><block type="variables_get" id="Ke4fx:{a,r8`eNfOEj|3"><field name="VAR">金额</field></block></value><value name="space"><shadow type="math_number" id="lz3{RxDtOBEvzC(Ldl_p"><field name="NUM">0</field></shadow></value><next><block type="esp32_onboard_music_pitch_with_time" id="6U#A2o_rj7?a4S?P{F7E"><value name="pitch"><shadow type="pins_tone_notes" id="U*KyTW@nBl_ch6CMqeGy"><field name="PIN">659</field></shadow></value><value name="time"><shadow type="math_number" id="gmt18[06GbrA?cOUc@1e"><field name="NUM">100</field></shadow></value><next><block type="system_print" id="on{2Ytd`SF/RvBP$O=UC"><value name="VAR"><shadow type="text" id="hq{x(fHj4gO;nDIjg:BJ"><field name="TEXT">Mixly</field></shadow><block type="text_join" id="{L{an;v!cfcBl}o;yd?a"><value name="A"><shadow type="text" id="oE9#P#Cs~[Q3JG[oG+Us"><field name="TEXT">发卡成功：</field></shadow></value><value name="B"><shadow type="text" id="p-CL.BG]S}QRL{Fh#t_r"><field name="TEXT">Mixly</field></shadow><block type="number_to_text" id="Z,^2h!t!pOrI`13([l5p"><value name="VAR"><shadow type="variables_get" id="NpOPV^0N.1fY#r2*f6Px"><field name="VAR">x</field></shadow><block type="variables_get" id="RaNe_:6[kS+}1#7V);iX"><field name="VAR">金额</field></block></value></block></value></block></value></block></next></block></next></block></statement><statement name="ELSE"><block type="display_show_image" id="*n(9@;f.Ja9?Vf;;47#K"><value name="data"><shadow type="pins_builtinimg" id="B7PCI_NiBJ0*_x4+W!`{"><field name="PIN">onboard_matrix.NO</field></shadow></value><next><block type="esp32_onboard_music_pitch_with_time" id="I2FSze0dnS0J!+YcQA02"><value name="pitch"><shadow type="pins_tone_notes" id="SR;4tt_(^oXJ?f1K-/X."><field name="PIN">131</field></shadow></value><value name="time"><shadow type="math_number" id="*M[YKtu_0YgAuqM5:_Gf"><field name="NUM">100</field></shadow></value></block></next></block></statement></block></statement></block></xml><config>{}</config><code>aW1wb3J0IG1peGdvX21pbmkKaW1wb3J0IG1pbmlfZzIKZnJvbSBtaW5pX2cyIGltcG9ydCBleHRfcmZpZApmcm9tIG1peGdvX21pbmkgaW1wb3J0IG9uYm9hcmRfbWF0cml4CmZyb20gbWl4Z29fbWluaSBpbXBvcnQgb25ib2FyZF9tdXNpYwppbXBvcnQgbWFjaGluZQoKCmRlZiDnlLXlrZDpkrHljIXlhYXlgLwo6YeR6aKdKToKICAgIOWOn+WAvCA9IGludCh0dXBsZShleHRfcmZpZC5yZWFkX2NhcmQoMCkpWzFdKQogICAgaWYgZXh0X3JmaWQud3JpdGVfY2FyZChzdHIoKOWOn+WAvCArIOmHkeminSkpLDApOgogICAgICAgIG9uYm9hcmRfbWF0cml4LnNob3dzKOWOn+WAvCArIOmHkeminSxzcGFjZSA9IDAsY2VudGVyID0gVHJ1ZSkKICAgICAgICBvbmJvYXJkX211c2ljLnBpdGNoX3RpbWUoNjU5LCAxMDApCiAgICAgICAgcHJpbnQoKCflt7LlhYXlgLw7JyArIHN0cijph5Hpop0pKSkKICAgICAgICBwcmludCgoJ+W9k+WJjeS9memine+8micgKyBzdHIoKOWOn+WAvCArIOmHkeminSkpKSkKICAgIGVsc2U6CiAgICAgICAgb25ib2FyZF9tYXRyaXguc2hvd3Mob25ib2FyZF9tYXRyaXguTk8pCiAgICAgICAgb25ib2FyZF9tdXNpYy5waXRjaF90aW1lKDEzMSwgMTAwKQoKZGVmIOeUteWtkOmSseWMheWIneWni+WMlijph5Hpop0pOgogICAgaWYgZXh0X3JmaWQud3JpdGVfY2FyZChzdHIo6YeR6aKdKSwwKToKICAgICAgICBvbmJvYXJkX21hdHJpeC5zaG93cyjph5Hpop0sc3BhY2UgPSAwLGNlbnRlciA9IFRydWUpCiAgICAgICAgb25ib2FyZF9tdXNpYy5waXRjaF90aW1lKDY1OSwgMTAwKQogICAgICAgIHByaW50KCgn5Y+R5Y2h5oiQ5Yqf77yaJyArIHN0cijph5Hpop0pKSkKICAgIGVsc2U6CiAgICAgICAgb25ib2FyZF9tYXRyaXguc2hvd3Mob25ib2FyZF9tYXRyaXguTk8pCiAgICAgICAgb25ib2FyZF9tdXNpYy5waXRjaF90aW1lKDEzMSwgMTAwKQoKCgp3aGlsZSBUcnVlOgogICAgaWYgbWl4Z29fbWluaS5CMmtleS53YXNfcHJlc3NlZCgpOgogICAgICAgIOWNoeWPtyA9IGV4dF9yZmlkLnJlYWRfY2FyZCgwLCB4PSJpZCIpCiAgICAgICAgaWYgc3RyKOWNoeWPtykgIT0gJ05vbmUnOgogICAgICAgICAgICDnlLXlrZDpkrHljIXliJ3lp4vljJYoMjApCiAgICBpZiBtaXhnb19taW5pLkIxa2V5Lndhc19wcmVzc2VkKCk6CiAgICAgICAg5Y2h5Y+3ID0gZXh0X3JmaWQucmVhZF9jYXJkKDAsIHg9ImlkIikKICAgICAgICBpZiBzdHIo5Y2h5Y+3KSAhPSAnTm9uZSc6CiAgICAgICAgICAgIOeUteWtkOmSseWMheWFheWAvCg1MCkK</code>